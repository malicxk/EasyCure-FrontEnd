<app-header-user></app-header-user>
<div class="max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto">
    <h2 class="text-3xl font-semibold text-center text-gray-800 mb-10">
        Consultation History
    </h2>
    <!-- Grid -->
    <div *ngIf="prescription && prescription.length; else noPrescriptions"
        class="grid lg:grid-cols-2 lg:gap-y-16 gap-10">
        <!-- Card -->
        <div *ngFor="let prescription of prescription" class="group rounded-xl overflow-hidden">
            <div class="sm:flex">
                <div class="flex-shrink-0 relative rounded-xl overflow-hidden w-full sm:w-56 h-44 bg-gray-200">
                    <img class="group-hover:scale-105 transition-transform duration-500 ease-in-out size-full absolute top-0 start-0 object-cover rounded-xl"
                        [src]="prescription.doctorId.profilePhoto || 'https://via.placeholder.com/150'"
                        alt="Prescription Image">
                </div>

                <div class="grow mt-4 sm:mt-0 sm:ms-6 px-4 sm:px-0">
                    <h3 class="text-xl font-semibold text-gray-800 group-hover:text-gray-600">
                        Specialization: {{ prescription.prescriptionData.doctorInfo.specialization }}
                    </h3>
                    <p class="mt-3 text-gray-600">
                        Consulted Date: {{ prescription.createdAt | date: 'medium' }}
                    </p>
                    <p class="mt-4 text-gray-800">
                        Doctor: {{ prescription.doctorId.doctorname}}
                    </p>
                    <p class="mt-4 text-gray-600">
                        Patient: {{ prescription.patientId.username}}
                    </p>

                    <!-- Download Button -->
                    <div class="mt-4 text-gray-700">
                        Prescription :
                        <button class="text-blue-600 hover:underline"
                            (click)="downloadPrescription(prescription._id)">Download</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Card -->
    </div>

    <!-- No Prescriptions Available -->
    <ng-template #noPrescriptions>
        <p class="text-center text-4xl text-gray-600">No prescriptions available.</p>
    </ng-template>
</div>